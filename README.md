# Vpn Switcher
В текущих реалиях происходит так, что тебе необходим VPN на тех устройствах,
на которых ты его поставить не можешь. В моем случае это был шлем **Meta Quest 3**.
Я банально не мог его запустить, пока не накатил VPN на мой OpenWRT роутер. В общем-то никогда
не нуждался в VPN непосредственно на роутере, но раз он появился, то я решил упростить неИТшникам
в моем доме процесс его запуска.

Схема следующая, ESP32 ждет нажатия кнопки. После нажатия шлет HTTP запрос на роутер на CGI-скрипт,
который обрабатывает запрос.
Сделал два вида запросов. Оба POST, оба передают в теле(_text/plain_) название интересующего
интерфейса:
* POST /if-status - возвращает true или false, соответствующий запущенности интерфейса
* POST /if-restart - запускает интерфейс, вне зависимости от его предыдущего состояния

Нажатие на кнопку, подключенную к ESP32 выызвает HTTP запрос на статус wg0 интерфейса. Если
он запущен, то он тушится, а wan перезагружается, чтобы он вновь стал дефолтным гейтвеем.
В ином случае, просто запускается wg0.

## Как запустить
Если вдруг кто-то решил это повторить, то нужно при компиляции указать переменные окружения:
* WIFI_SSID
* WIFI_PASSWORD

В Makefile обязательно укажите порт, к которому вы подключаете свой микропроцессор.  
`make` - скомпилирует программу, прошьет устройство, а также запустит его мониторинг.
